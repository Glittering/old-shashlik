cmake_minimum_required(VERSION 2.8)

# General definitions
set(SHASHLIK_VERSION_STRING "0.5.0")
set(SHASHLIK_VERSION_MAJOR 0)
set(SHASHLIK_VERSION_MINOR 5)
set(SHASHLIK_VERSION_RELEASE 0)
set(SHASHLIK_VERSION_YEAR 2014)

# ----------------------------------------------------------------
# Requirements


find_package(ECM 1.0.0 REQUIRED NO_MODULE)
set(CMAKE_MODULE_PATH ${ECM_MODULE_PATH} ${ECM_KDE_MODULE_DIR})

# For KF5 stuff, you must set the CMake module path first. See BUILDING 
# for how to do that.

find_package(Qt5Core ${REQUIRED_QT_VERSION} REQUIRED NO_MODULE)
#find_package(Qt COMPONENTS QtCore REQUIRED)

set(KF5_VERSION "5.0.0") # handled by release scripts
set(KF5_DEP_VERSION "5.0.0") # handled by release scripts

# CMake include files. Paths are generated by the find_package calls above(?)
include(FeatureSummary)
include(GenerateExportHeader)
include(ECMGenerateHeaders)
include(KDEInstallDirs)
include(KDECMakeSettings)
include(KDECompilerSettings)
include(ECMPackageConfigHelpers)
include(ECMSetupVersion)
include(KDEFrameworkCompilerSettings)


# ----------------------------------------------------------------
# Various project settings


# It is assumed that the various repos are checked out next to this one
set(GENERAL_SOURCE_PATH ${CMAKE_SOURCE_DIR}/..)

set(ANDROID_CORE_PATH              ${GENERAL_SOURCE_PATH}/android-core)
set(ANDROID_LIBCORE_PATH           ${GENERAL_SOURCE_PATH}/android-libcore)
set(ANDROID_FRAMEWORKS_NATIVE_PATH ${GENERAL_SOURCE_PATH}/android-frameworks-native)


set(LIBBINDER_INCLUDES ${CMAKE_SOURCE_DIR}/src/libs/libbinder
                       ${ANDROID_FRAMEWORKS_NATIVE_PATH}/include
                       ${CMAKE_INSTALL_PREFIX}/include    # FIXME: Remove when the build works without tier1/2
                       #${LIBXXX_INCLUDS}/include
)

# ----------------------------------------------------------------


add_subdirectory(src)
